post:
  description: "Выполняет диагностику аналоговой линии домофона"
  security:
    - basicAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - flat
          properties:
            flat:
              type: integer
              minimum: 1
              maximum: 9999
              description: Номер квартиры для проверки линии
        example:
          flat: 1
  responses:
    '200':
      description: Диагностика выполнена успешно
      content:
        application/json:
          schema:
            type: object
            description: Результат диагностики аналоговой линии (возвращается от WebSocket сервера)
            properties:
              comFlat:
                type: integer
                description: Номер квартиры для коммутации
              comLineVoltage:
                type: string
                description: Напряжение на линии домофона
              status:
                type: string
                description: Статус проверки линии
          example:
            comFlat: 1
            comLineVoltage: "24V"
            status: "ok"
    '400':
      description: Неверный запрос
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                description: Описание ошибки валидации
                examples:
                  - "request body is empty"
                  - "invalid JSON format"
                  - "missing required field: flat"
                  - "flat must be an integer"
                  - "flat number must be positive"
                  - "flat number must be between 1 and 9999"
          example:
            error: "flat number must be between 1 and 9999"
    '401':
      description: Ошибка аутентификации
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                description: Описание ошибки аутентификации
          example:
            error: "authentication failed"
    '500':
      description: Внутренняя ошибка сервера
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                description: Описание внутренней ошибки сервера
          example:
            error: "test execution failed"
  summary: Диагностика аналоговой линии
  tags:
  - Intercom